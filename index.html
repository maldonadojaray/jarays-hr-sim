
<!doctype html>
.overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.6);
  display:none; align-items:center; justify-content:center; padding:14px;
  z-index:50;
}
.modal{
  width:min(820px, 100%); max-height:85vh; overflow:auto;
  background:linear-gradient(180deg,var(--panel2) 0%, #0d131d 100%);
  border:1px solid var(--border); border-radius:16px; padding:12px;
}
.modalTop{display:flex; justify-content:space-between; gap:10px; align-items:center}
.policyCard{
  border:1px solid var(--border);
  background:rgba(255,255,255,0.03);
  border-radius:14px; padding:10px;
  display:grid; gap:6px;
}
.policyTitle{font-weight:900}
.policyMeta{font-size:12px;color:var(--muted)}
.policyBody{font-size:12px;color:rgba(233,238,246,.86); line-height:1.35; white-space:pre-wrap}
.attached{
  border-color: rgba(125,255,125,.45);
  background: rgba(125,255,125,.06);
}
.gameOver{ text-align:center; padding:14px; }
.big{font-size:18px;font-weight:950}
/* NEW: Termination styling */
.terminated .head{
  filter: grayscale(0.7) opacity(0.6);
}

<div id="setupView" class="row" style="display:none">
  <div class="card">
    <h2>Create your HR Specialist</h2>
    <div class="grid">
      <div>
        <label for="name">Name</label>
        <input id="name" placeholder="e.g., Jaray" maxlength="22" />
      </div>

      <div class="form">
        <div>
          <label for="pronouns">Gender/Pronouns</label>
          <select id="pronouns">
            <option value="he/him">He/Him</option>
            <option value="she/her">She/Her</option>
            <option value="they/them">They/Them</option>
            <option value="custom">Custom…</option>
          </select>
        </div>
        <div id="customPronounsWrap" style="display:none">
          <label for="customPronouns">Custom pronouns</label>
          <input id="customPronouns" placeholder="e.g., ze/zir" maxlength="18"/>
        </div>
      </div>

      <div class="form">
        <div>
          <label for="skin">Skin tone</label>
          <select id="skin">
            <option value="#f3d6c6">Light</option>
            <option value="#e3b79a">Warm</option>
            <option value="#d7a98b" selected>Tan</option>
            <option value="#b87b59">Brown</option>
            <option value="#8a5a3d">Deep</option>
          </select>
        </div>
        <div>
          <label for="hairColor">Hair color</label>
          <select id="hairColor">
            <option value="#1f1f1f" selected>Black</option>
            <option value="#5a3a2a">Brown</option>
            <option value="#caa24a">Blonde</option>
            <option value="#a83b2f">Auburn</option>
            <option value="#6a7cff">Blue</option>
            <option value="#ff5aa8">Pink</option>
          </select>
        </div>
      </div>

      <div>
        <label for="hairStyle">Hair style</label>
        <select id="hairStyle">
          <option value="short">Short</option>
          <option value="fade">Fade</option>
          <option value="long" selected>Long</option>
          <option value="bun">Bun</option>
          <option value="ponytail">Ponytail</option>
        </select>
      </div>

      <div class="avatar" id="avatarPreview" aria-label="Avatar preview">
        <div class="head" id="head"><div class="hair" id="hair"></div></div>
        <div class="grid" style="gap:4px">
          <div style="font-weight:900" id="previewName">HR Specialist</div>
          <div class="small" id="previewMeta">Pronouns: they/them</div>
          <div class="small muted">“Anime vibe” is UI + writing, not portraits.</div>
        </div>
      </div>

      <div class="btnrow">
        <button type="button" class="good" id="startBtn">Start Simulator</button>
        <button type="button" id="wipeBtn" class="danger">Reset All Data</button>
      </div>

      <div class="toast" id="setupToast" aria-live="polite"></div>
    </div>
  </div>

  <div class="card2">
    <h2>Now with hiring & terminations</h2>
    <div class="small">
      Hire candidates to grow your roster. Terminations create ripple effects.
      <div class="divider"></div>
      <span class="tag">Hiring</span>
      <span class="tag">Termination</span>
      <span class="tag">Follow-up queue</span>
      <span class="tag">Thread chains</span>
    </div>
  </div>
</div>

<div id="gameView" class="row" style="display:none">
  <div class="grid">
    <div class="card">
      <h2>Your Profile</h2>
      <div class="avatar">
        <div class="head" id="pHead"><div class="hair" id="pHair"></div></div>
        <div class="grid" style="gap:4px; width:100%">
          <div style="display:flex; justify-content:space-between; gap:10px; align-items:center">
            <div style="font-weight:950; font-size:16px" id="pName">—</div>
            <span class="pill"><span class="mono" id="dayCount">Day 1</span></span>
          </div>
          <div class="small" id="pMeta">—</div>
          <div class="small muted">Hospital HR • Decisions shape culture, risk, and retention.</div>
        </div>
      </div>

      <div class="divider"></div>

      <h2>Dashboard</h2>
      <div class="kpis">
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Morale</span><span class="mono" id="kMorale">50</span></div>
          <div class="bar"><div class="fill" id="bMorale" style="background:var(--good)"></div></div>
        </div>
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Compliance Risk</span><span class="mono" id="kRisk">50</span></div>
          <div class="bar"><div class="fill" id="bRisk" style="background:var(--warn)"></div></div>
        </div>
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Turnover Risk</span><span class="mono" id="kTurnover">50</span></div>
          <div class="bar"><div class="fill" id="bTurnover" style="background:var(--warn)"></div></div>
        </div>
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Efficiency</span><span class="mono" id="kEff">50</span></div>
          <div class="bar"><div class="fill" id="bEff" style="background:var(--blue)"></div></div>
        </div>
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Your Reputation</span><span class="mono" id="kRep">50</span></div>
          <div class="bar"><div class="fill" id="bRep" style="background:var(--purple)"></div></div>
        </div>
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Time (Today)</span><span class="mono" id="kTime">3</span></div>
          <div class="bar"><div class="fill" id="bTime" style="background:rgba(233,238,246,.55)"></div></div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="kpis">
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Score</span><span class="mono" id="kScore">0</span></div>
          <div class="small muted">Solve cases fast + clean for points.</div>
        </div>
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Active Case Age</span><span class="mono" id="kAge">—</span></div>
          <div class="small muted">Carry-over = penalties. Dropping = worse.</div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="kpis">
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Follow-ups queued</span><span class="mono" id="kQueue">0</span></div>
          <div class="small muted">These will hit before random cases.</div>
        </div>
        <div class="grid" style="gap:6px">
          <div class="kv"><span>Thread pressure</span><span class="mono" id="kThreads">—</span></div>
          <div class="small muted">How many active chains exist.</div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="btnrow">
        <button type="button" id="newCaseBtn" class="good">Get Next Case</button>
        <button type="button" id="endDayBtn">End Day</button>
        <button type="button" id="viewHistoryBtn">Case History</button>
        <button type="button" id="viewRosterBtn">Staff Roster</button>
        <button type="button" id="editProfileBtn">Edit Profile</button>
        <button type="button" id="resetBtn" class="danger">Reset Simulator</button>
      </div>

      <div class="toast" id="gameToast" aria-live="polite"></div>
    </div>

    <div class="card2" id="historyCard" style="display:none">
      <h2>Recent Case Log</h2>
      <div class="small muted">Your last 20 cases (most recent first).</div>
      <div class="divider"></div>
      <div class="log" id="log"></div>
    </div>

    <div class="card2" id="rosterCard" style="display:none">
      <h2>Hospital Staff</h2>
      <div class="small muted">Active & terminated staff appear below.</div>
      <div class="divider"></div>
      <div class="log" id="rosterLog"></div>
    </div>
  </div>

  <div class="card" id="caseCard">
    <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start">
      <div>
        <div class="caseTitle" id="caseTitle">Press “Get Next Case”</div>
        <div class="tags" id="caseTags"></div>
      </div>
      <span class="pill">Severity <span class="mono" id="caseSev">—</span>/5</span>
    </div>

    <div class="divider"></div>

    <div class="caseBody" id="caseBody">
      Choose a case to begin. Your goal is to keep Morale high while lowering Compliance/Turnover risk and keeping operations moving.
    </div>

    <div class="divider"></div>

    <h2>Gather information (costs 1 time each)</h2>
    <div class="btnrow" id="infoBtns">
      <button type="button" id="moreInfoBtn" disabled>More Info</button>
      <button type="button" id="witnessBtn" disabled>Interview Witness</button>
      <button type="button" id="docsBtn" disabled>Policy Binder (Docs)</button>
      <button type="button" id="scheduleBtn" disabled>Check Schedule/Timecard</button>
      <button type="button" id="auditBtn" disabled>Check Audit Logs</button>
      <button type="button" id="legalBtn" disabled>Consult Compliance/Legal</button>
    </div>

    <div class="divider"></div>

    <h2>Choose your action</h2>
    <div class="btnrow" id="choiceBtns"></div>

    <div class="divider"></div>
    <div class="small" id="outcomeText"></div>
  </div>
</div>

